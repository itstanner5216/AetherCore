{
  "openapi": "3.1.0",
  "info": {
    "title": "AetherCore Gateway API",
    "description": "HTTP Gateway for ProjectGPT (AetherCore) Skills - Converts modular AI skills into REST endpoints",
    "version": "1.0.0"
  },
  "servers": [
    {"url": "https://aethercore-itstanner5216-f807e0d1.koyeb.app", "description": "Production"}
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "operationId": "health_check",
        "tags": ["System"],
        "responses": {
          "200": {
            "description": "Service status",
            "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HealthResponse"}}}
          }
        }
      }
    },
    "/logs": {
      "get": {
        "summary": "Get Logs",
        "operationId": "get_logs",
        "tags": ["System"],
        "security": [{"HTTPBearer": []}],
        "parameters": [
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 50}},
          {"name": "log_type", "in": "query", "schema": {"type": "string", "enum": ["all", "telemetry", "errors"], "default": "all"}}
        ],
        "responses": {
          "200": {"description": "Recent log entries"}
        }
      }
    },
    "/skills": {
      "get": {
        "summary": "List Skills",
        "operationId": "list_skills",
        "tags": ["Skills"],
        "security": [{"HTTPBearer": []}],
        "responses": {
          "200": {
            "description": "Available skills",
            "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SkillInfo"}}}}
          }
        }
      }
    },
    "/skills/{skill_name}": {
      "get": {
        "summary": "Get Skill Info",
        "operationId": "get_skill_info",
        "tags": ["Skills"],
        "security": [{"HTTPBearer": []}],
        "parameters": [
          {"name": "skill_name", "in": "path", "required": true, "schema": {"type": "string"}}
        ],
        "responses": {
          "200": {"description": "Skill details"}
        }
      }
    },
    "/tools/{skill_name}/{tool_name}": {
      "post": {
        "summary": "Execute Tool",
        "description": "Execute a specific tool from a ProjectGPT skill. Examples: deepforge/research, searchengine/search, marketsweep/scan",
        "operationId": "execute_tool",
        "tags": ["Tools"],
        "security": [{"HTTPBearer": []}],
        "parameters": [
          {"name": "skill_name", "in": "path", "required": true, "schema": {"type": "string"}, "description": "Skill name (e.g., deepforge, searchengine, marketsweep)"},
          {"name": "tool_name", "in": "path", "required": true, "schema": {"type": "string"}, "description": "Tool name (e.g., research, search, scan)"}
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/ToolRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tool execution result",
            "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ToolResponse"}}}
          }
        }
      }
    },
    "/orchestrate": {
      "post": {
        "summary": "Orchestrate Skills",
        "description": "Execute multiple tools in sequence with dependency resolution",
        "operationId": "orchestrate_skills",
        "tags": ["Orchestration"],
        "security": [{"HTTPBearer": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workflow": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "skill": {"type": "string"},
                        "tool": {"type": "string"},
                        "params": {"type": "object"}
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {"description": "Combined workflow results"}
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "timestamp": {"type": "string"},
          "skills_loaded": {"type": "integer"},
          "gateway_version": {"type": "string"}
        }
      },
      "SkillInfo": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "version": {"type": "string"},
          "description": {"type": "string"},
          "callable": {"type": "boolean"},
          "priority": {"type": "integer"},
          "tools": {"type": "array", "items": {"type": "string"}},
          "endpoint": {"type": "string"}
        }
      },
      "ToolRequest": {
        "type": "object",
        "properties": {
          "parameters": {
            "type": "object",
            "description": "Tool-specific parameters (e.g., {\"query\": \"search term\"} for search)"
          },
          "context": {
            "type": "object",
            "description": "Optional context for request tracking"
          }
        },
        "required": ["parameters"]
      },
      "ToolResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "skill": {"type": "string"},
          "tool": {"type": "string"},
          "context_id": {"type": "string"},
          "result": {"type": "object"},
          "timestamp": {"type": "string"},
          "execution_time_ms": {"type": "number"}
        }
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    },
    "examples": {
      "SearchEngine_search": {
        "summary": "SearchEngine.search example",
        "description": "Real web search using Google, Brave, or Serper APIs with Redis quota management",
        "value": {
          "parameters": {
            "query": "Kubernetes deployment tutorial",
            "max_results": 10,
            "provider": "auto"
          },
          "context": {
            "context_id": "user-123"
          }
        }
      },
      "SearchEngine_scrape": {
        "summary": "SearchEngine.scrape example",
        "description": "Web scraping using Webscraping API or ScrapingAnt",
        "value": {
          "parameters": {
            "url": "https://example.com",
            "render_js": false,
            "use_premium_proxy": false
          },
          "context": {
            "context_id": "scrape-456"
          }
        }
      },
      "SearchEngine_quota_status": {
        "summary": "SearchEngine.quota_status example",
        "description": "Get current quota status for all search providers",
        "value": {
          "parameters": {},
          "context": {
            "context_id": "quota-check"
          }
        }
      },
      "SearchEngine_reset_quotas": {
        "summary": "SearchEngine.reset_quotas example",
        "description": "Reset quota counters for a specific provider or all providers",
        "value": {
          "parameters": {
            "provider": "google"
          },
          "context": {
            "context_id": "admin-reset"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "System",
      "description": "System health and monitoring endpoints"
    },
    {
      "name": "Skills",
      "description": "Skill discovery and information endpoints"
    },
    {
      "name": "Tools",
      "description": "Execute tools from AetherCore skills"
    },
    {
      "name": "SearchEngine",
      "description": "Web search and scraping tools with quota management",
      "externalDocs": {
        "description": "SearchEngine Documentation",
        "url": "https://github.com/aethercore/searchengine"
      }
    },
    {
      "name": "Orchestration",
      "description": "Multi-skill workflow orchestration"
    }
  ]
}
